<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Entities and Their Components - space_shooter_rs Documentation</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "rust" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="gameplay.html"><strong aria-hidden="true">2.</strong> Gameplay</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="controls.html"><strong aria-hidden="true">2.1.</strong> Controls</a></li><li class="chapter-item expanded "><a href="characters.html"><strong aria-hidden="true">2.2.</strong> Characters</a></li><li class="chapter-item expanded "><a href="items.html"><strong aria-hidden="true">2.3.</strong> Items</a></li><li class="chapter-item expanded "><a href="consumables.html"><strong aria-hidden="true">2.4.</strong> Consumables</a></li><li class="chapter-item expanded "><a href="enemies.html"><strong aria-hidden="true">2.5.</strong> Enemies</a></li><li class="chapter-item expanded "><a href="allies.html"><strong aria-hidden="true">2.6.</strong> Allies</a></li><li class="chapter-item expanded "><a href="bosses.html"><strong aria-hidden="true">2.7.</strong> Bosses</a></li></ol></li><li class="chapter-item expanded "><a href="contributing.html"><strong aria-hidden="true">3.</strong> Contibuting code</a></li><li class="chapter-item expanded "><a href="architecture.html"><strong aria-hidden="true">4.</strong> Architecture</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="entities-components.html" class="active"><strong aria-hidden="true">4.1.</strong> Entities and Their Components</a></li><li class="chapter-item expanded "><a href="TODO.html"><strong aria-hidden="true">4.2.</strong> Systems</a></li></ol></li><li class="chapter-item expanded "><a href="TODO.html"><strong aria-hidden="true">5.</strong> Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="TODO.html"><strong aria-hidden="true">5.1.</strong> Contributing art</a></li><li class="chapter-item expanded "><a href="add_item.html"><strong aria-hidden="true">5.2.</strong> Adding Items</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="design_item.html"><strong aria-hidden="true">5.2.1.</strong> Design your Item</a></li><li class="chapter-item expanded "><a href="append_item_sprite.html"><strong aria-hidden="true">5.2.2.</strong> Append Sprite to Spritesheet</a></li><li class="chapter-item expanded "><a href="append_item_data.html"><strong aria-hidden="true">5.2.3.</strong> Append Data to items.ron</a></li><li class="chapter-item expanded "><a href="TODO.html"><strong aria-hidden="true">5.2.4.</strong> Item Animations</a></li><li class="chapter-item expanded "><a href="TODO.html"><strong aria-hidden="true">5.2.5.</strong> Adding New Stat Effects</a></li><li class="chapter-item expanded "><a href="TODO.html"><strong aria-hidden="true">5.2.6.</strong> Adding New Bool Effects</a></li></ol></li><li class="chapter-item expanded "><a href="TODO.html"><strong aria-hidden="true">5.3.</strong> Writing tests</a></li></ol></li><li class="chapter-item expanded "><a href="item_effects.html"><strong aria-hidden="true">6.</strong> Appendix A: Item Effects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="stat_effects.html"><strong aria-hidden="true">6.1.</strong> Stat Effects</a></li><li class="chapter-item expanded "><a href="bool_effects.html"><strong aria-hidden="true">6.2.</strong> Bool Effects</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">space_shooter_rs Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#entities-and-their-components" id="entities-and-their-components">Entities and their components</a></h1>
<p>The core of ECS is knowing that an entity is a collection of components. These
components provide bits of functionality to the entity that, when combined
together, make it easier to conceptualize the expected behaviour of the entity.</p>
<p>There are several
<a href="https://github.com/amethyst/space_shooter_rs/tree/master/src/entities">entities</a>
and
<a href="https://github.com/amethyst/space_shooter_rs/tree/master/src/components">components</a>
in space_shooter_rs. This might make the game's code seem
intimidating and needlessly complex, but being able to break down functionality
of an entity into smaller pieces of data makes it much easier to expand upon
as the game grows.</p>
<p>We will look at three entities present in space_shooter_rs: <code>Spaceship</code>
(refers to the player), <code>Enemy</code>
and <code>Item</code>. For each one, we can define a set of requirements these entities
should have:</p>
<table><thead><tr><th align="center">Component</th><th align="center">Description</th><th align="center">Entities attached to</th></tr></thead><tbody>
<tr><td align="center">Animation</td><td align="center">Is animated</td><td align="center">Item, Enemy, Spaceship</td></tr>
<tr><td align="center">Blaster</td><td align="center">Can fire projectiles (blasts)</td><td align="center">Enemy, Spaceship</td></tr>
<tr><td align="center">Enemy</td><td align="center">Data specific to <code>Enemy</code> entities</td><td align="center">Enemy</td></tr>
<tr><td align="center">Health</td><td align="center">Can receive damage</td><td align="center">Enemy, Spaceship</td></tr>
<tr><td align="center">Hitbox2D</td><td align="center">Can collide in 2D space</td><td align="center">Item, Enemy, Spaceship</td></tr>
<tr><td align="center">Item</td><td align="center">Data specific to <code>Item</code> entities</td><td align="center">Item</td></tr>
<tr><td align="center">Motion2D</td><td align="center">Can move in 2D space</td><td align="center">Item, Enemy, Spaceship</td></tr>
<tr><td align="center">Spaceship</td><td align="center">Data specific to <code>Spaceship</code> entities</td><td align="center">Spaceship</td></tr>
<tr><td align="center">SpriteRender</td><td align="center">Is rendered to screen</td><td align="center">Item, Enemy, Spaceship</td></tr>
<tr><td align="center">Transform</td><td align="center">Has a position, scale, and rotation in the game</td><td align="center">Item, Enemy, Spaceship</td></tr>
</tbody></table>
<p>Again, this seems like a lot of components for only three entities. But if we keep
in mind that every component is a small piece of data that represents a single
piece of functionality for an entity, then it's easier to have a holistic view of
the entity's behavior.</p>
<p><img src="assets/entity-component-drawing.png" alt="Drawing grouping together components per entity" />
<em>Drawing that groups together components relevant to each entity: Spaceship,
Enemy, and Item. Made with Excalidraw.</em></p>
<p>You might notice that each entity in this example has a component with the same
name. In space_shooter_rs, functionality that is specific to an entity should
be contained by its own specific component. For example, the <code>Item</code> component
has properties that are specific to an <code>Item</code> entity:</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>pub struct ItemComponent {
    pub price: usize,
    pub stat_effects: HashMap&lt;String, f32&gt;,
    pub bool_effects: HashMap&lt;String, bool&gt;,
    pub sprite_index: usize,
}
<span class="boring">}
</span></code></pre></pre>
<ul>
<li>
<p><code>price</code>: the monetary value required to purchase an <code>Item</code> entity
from the store.</p>
</li>
<li>
<p><code>stat_effects</code>: numerical properties affected when this item is applied
to another entity (i.e: increasing damage output).</p>
</li>
<li>
<p><code>bool_effects</code>: boolean properties affected when this item is applied to another
entity (i.e: grants damage immunity)</p>
</li>
<li>
<p><code>sprite_index</code>: location of the sprite to be rendered to the screen.</p>
</li>
</ul>
<h2><a class="header" href="#conventions-for-components-in-space-shooter" id="conventions-for-components-in-space-shooter">Conventions for Components in Space Shooter</a></h2>
<p>When defining a new entity, it is always preferable to reuse existing components.
However, as described above, there will be cases where pieces of functionality
will be specific to an entity. So it's okay to add a new one when necessary.</p>
<h3><a class="header" href="#custom-components" id="custom-components">Custom Components</a></h3>
<p>If you need to add a new component, make sure to add &quot;Component&quot; to the end of
its name. For example (and as shown above) the &quot;Item&quot; component should be named
<code>ItemComponent</code> in its struct definition. This makes it easier to distinguish
between entities, components, and systems that have the same name.</p>
<h3><a class="header" href="#tag-components" id="tag-components">Tag Components</a></h3>
<p>These are components whose sole purpose is to act as an identifier for entity.
This is particularly useful when filtering for a component that is attached to
a specific entity. For example, if an enemy entity reaches the bottom of the
game window, this causes damage to the player's defense status bar. We only
want to affect the <code>HealthComponent</code> associated with the entity with a
<code>DefenseTag</code> attached to it, not the <code>HealthComponent</code> associated with the
spaceship entity.</p>
<p>If you need to create a tag component, then &quot;Tag&quot; should be added to the end of
its name. For example, <code>DefenseTag</code> is a component meant as an identifier and
nothing else. These tag components should be added to <code>src/components/tags.rs</code>.</p>
<h2><a class="header" href="#conclusion" id="conclusion">Conclusion</a></h2>
<p>Having entities and components alone doesn't actually add functionality to the game.
This is where the &quot;Systems&quot; in ECS comes in. In the next sections of this chapter,
we will go over a few of the systems present in space_shooter_rs.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="architecture.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="TODO.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="architecture.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="TODO.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
